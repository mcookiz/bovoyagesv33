<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>BoVoyages</title>
</h:head>
<h:body>
	<f:view>
		<div class="ui-g">
			<div class="ui-g-2">
				<h:form>
					<p:accordionPanel dynamic="true">
						<p:tab title="Rechercher">
							<h:outputLabel>Rechercher par région :</h:outputLabel>
							<br />
							<h:inputText value="#{bean.region}"></h:inputText>
							<br />
							<br />
							<p:commandButton value="Rechercher"
								action="#{bean.startSearchByRegion(bean.region)}"></p:commandButton>
						</p:tab>
						<p:tab title="Ajouter">
							<p:commandButton value="add Destination" action="addDestination"></p:commandButton>
							<br />
						</p:tab>

					</p:accordionPanel>






				</h:form>
			</div>
			<div class="ui-g-7">
				<h:form>
					<p:dataTable var="d" value="#{service.all}" stickyHeader="true">
						<f:facet name="header">
       	 			Liste des Destinations
    			</f:facet>
						<p:column priority="3">
							<f:facet name="header">
								<h:outputText value="Region" />
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{d.region}" />
								</f:facet>
								<f:facet name="input">
									<h:inputText value="#{d.region}" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column priority="2">
							<f:facet name="header">
								<h:outputText value="Description" />
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{d.description}" />
								</f:facet>
								<f:facet name="input">
									<h:inputText value="#{d.description}" />
								</f:facet>
							</p:cellEditor>

						</p:column>
						<p:column priority="6">
							<f:facet name="header">
								<h:outputText value="Dates de départ" />
							</f:facet>
							<ul>
								<ui:repeat value="#{d.listeDV}" var="dt">



									<li><h:outputText value="#{dt.dateDepart}">
											<f:convertDateTime type="date" pattern="dd/MM/yyyy"
												timeZone="Europe/Paris" />
										</h:outputText></li>

								</ui:repeat>
							</ul>



						</p:column>
						<p:column priority="6">
							<f:facet name="header">
								<h:outputText value="Dates de retour" />
							</f:facet>
							<ul>
								<ui:repeat value="#{d.listeDV}" var="dt">



									<li><h:outputText value="#{dt.dateRetour}">
											<f:convertDateTime type="date" pattern="dd/MM/yyyy"
												timeZone="Europe/Paris" />
										</h:outputText></li>

								</ui:repeat>
							</ul>



						</p:column>

						<p:column priority="5">
							<f:facet name="header">
								<h:outputText value="Options" />
							</f:facet>
							<p:commandButton value="update"
								action="#{bean.startUpdate(d.id)}"></p:commandButton>
							<p:commandButton value="delete" action="#{service.remove(d.id)}"></p:commandButton>

						</p:column>


					</p:dataTable>
				</h:form>
			</div>

		</div>













	</f:view>

</h:body>
</html>